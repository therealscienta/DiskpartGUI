<Window x:Class="DiskpartGUI.Views.Dialogs.AddPartitionDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Add Partition"
        Width="420" Height="340"
        Background="#16213E"
        Foreground="#ECF0F1"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        ShowInTaskbar="False">

    <Window.Resources>
        <ResourceDictionary Source="../../Resources/Styles.xaml"/>
    </Window.Resources>

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Add New Partition" FontSize="16" FontWeight="SemiBold"
                   Foreground="#ECF0F1" Margin="0,0,0,20"/>

        <StackPanel Grid.Row="1">
            <!-- Size -->
            <TextBlock Style="{StaticResource FieldLabelStyle}" Text="Size (MB)"/>
            <Grid Margin="0,0,0,16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Slider Grid.Column="0" Minimum="8" Maximum="{Binding AvailableSpaceMb}"
                        Value="{Binding SizeMb, Mode=TwoWay}"
                        TickFrequency="1024" IsSnapToTickEnabled="False"
                        VerticalAlignment="Center" Margin="0,0,12,0"/>
                <TextBox Grid.Column="1" Width="80"
                         Text="{Binding SizeMb, UpdateSourceTrigger=PropertyChanged}"
                         Background="#1A1A2E" Foreground="#ECF0F1"
                         BorderBrush="#34495E" Padding="6,4"/>
            </Grid>
            <TextBlock Style="{StaticResource FieldLabelStyle}"
                       Text="{Binding AvailableSpaceMb, StringFormat='Available: {0:N0} MB'}"/>

            <!-- Label -->
            <TextBlock Style="{StaticResource FieldLabelStyle}" Text="Label" Margin="0,12,0,2"/>
            <TextBox Text="{Binding Label, UpdateSourceTrigger=PropertyChanged}"
                     Background="#1A1A2E" Foreground="#ECF0F1"
                     BorderBrush="#34495E" Padding="8,6" Margin="0,0,0,16"/>

            <!-- Filesystem -->
            <TextBlock Style="{StaticResource FieldLabelStyle}" Text="Filesystem"/>
            <ComboBox ItemsSource="{Binding FileSystems}"
                      SelectedItem="{Binding FileSystem, Mode=TwoWay}"
                      Background="#1A1A2E" Foreground="#ECF0F1"
                      BorderBrush="#34495E" Padding="8,6"/>
        </StackPanel>

        <!-- Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button Content="Cancel" Style="{StaticResource PrimaryButtonStyle}"
                    Background="#34495E" Click="Cancel_Click" Margin="0,0,8,0"/>
            <Button Content="Add Partition" Style="{StaticResource PrimaryButtonStyle}"
                    IsEnabled="{Binding IsValid}" Click="Confirm_Click"/>
        </StackPanel>
    </Grid>
</Window>
